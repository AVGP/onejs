import math
import webgl

class Rect extends GLNode{

	mesh = webgl.vec4Rect(-1, -1, 2, 2, 0)
	
	viewmtx: mat4.perspective(70deg, 1, -1, 1)
	objmtx: mat4.RT(30deg, Time.sec * 30deg + slide*10,0, 0,0,3)

	vertex: mesh[] * (objmtx * viewmtx)
	slide = 1
	p:pixel mesh[]
	bgcolor: #red
	pixel: mix(bgcolor, #black, 
		abs(sin(slide * atan(p.x, p.y))))
		+ mix(#green, #purple) do
		sin(sin(Time.sec) * 2 * slide * p.x * p.y)
}

var ref = GLView{
	fill = #aero

	Rect{ slide = 10 }
}