//#js
import math
import gl
import glscene

Scene{
	//frame_rate = true
	fill = #black
	antialias = false
	Layer{
		w:device.w
		h:device.h
		pixel:mix(#111,#555,hp.y)
	}
	Text{
		sy:3.abs on pow(sin(0.5*time.sec),8.)
		sx:3.abs on pow(sin(0.5*time.sec),8.)
		var data = "abcdefghijklmnopqrstuvwxyz01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ!@$%^&*()"
		setInterval(=>{
			var t = 'Welcome to fonts evaluated on the GPU thanks to glyphy!'
			for(var j = 0;j<300;j++){
				for(var k = 0;k<6;k++)
					for(var i = 0;i<data.length;i++){
						t += data[parseInt(Math.random()*data.length)]
					}
				t += '\n'
			}
			value = t
			updateGeometry()
		}, 200)
		font_size = 1.
		u_outline = true
		displace: (sin(time.sec*4. + 18.*up.x)+ sin(time.sec*4. + 18.*up.y))*0.2
		u_outline_thickness: 3.+2.*(sin(4time.sec+sin(8.mesh[].x)+sin(4.mesh[].y)))
	}
}